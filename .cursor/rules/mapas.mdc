# Reglas de Mapas - SINCRONIZACI√ìN OBLIGATORIA

## ‚ö†Ô∏è REGLA CR√çTICA: Los 3 mapas son UNO SOLO

Los siguientes archivos son **3 IMPLEMENTACIONES DEL MISMO COMPONENTE**:

1. `components/mapa/MapaInteractivoGoogle.tsx` - Google Maps API
2. `components/mapa/MapLibreMap.tsx` - MapLibre GL JS
3. `components/mapa/LeafletMap.tsx` - Leaflet

**El admin puede cambiar entre ellos en cualquier momento desde la base de datos.
TODO debe funcionar ID√âNTICO en los 3.**

## üî¥ ANTES de modificar CUALQUIER mapa:

1. **LEER los 3 archivos** para entender el estado actual
2. **PLANIFICAR el cambio** para los 3 simult√°neamente
3. **IMPLEMENTAR en los 3** en el mismo commit
4. **VERIFICAR** que las props coincidan en `MapaInteractivo.tsx`

## ‚úÖ Funcionalidades que DEBEN ser id√©nticas:

| Funcionalidad | Descripci√≥n |
|---------------|-------------|
| `props` | Mismas props en la interface (areas, areaSeleccionada, onAreaClick, mapRef, onCountryChange, currentCountry, estilo, paisFiltro) |
| `clustering` | Supercluster con mismos par√°metros (radius: 100, maxZoom: 13, minPoints: 3) |
| `popup/InfoWindow` | Singleton, mismo HTML (createInfoWindowContent), mismos estilos |
| `resetZoom` | Inteligente seg√∫n paisFiltro (mismas coordenadas y zoom por regi√≥n/pa√≠s) |
| `toggleGPS` | Mismo comportamiento, localStorage 'gpsActive', marcador naranja #FF6B35 |
| `BuscadorGeografico` | Mismo componente, misma posici√≥n |
| `Botones UI` | GPS y Restablecer Zoom en mismas posiciones |
| `Estilos popup` | Bot√≥n X circular blanco con sombra, visible sobre fotos |
| `colores marcadores` | getTipoAreaColor() con mismos colores |

## üìã Proceso de cambio:

```
1. Hacer cambio en MapLibreMap.tsx (referencia)
2. Copiar/adaptar a MapaInteractivoGoogle.tsx
3. Copiar/adaptar a LeafletMap.tsx
4. Verificar MapaInteractivo.tsx (wrapper)
5. git add los 3 (o 4) archivos
6. git commit con mensaje descriptivo
7. git push
```

## üö´ PROHIBIDO:

- Modificar UN solo mapa sin actualizar los otros 2
- A√±adir props a uno sin a√±adirlas a todos
- Commits parciales que dejen mapas desincronizados
- Funcionalidades exclusivas de un proveedor

## üìÅ Archivo de referencia:

**MapLibreMap.tsx** es el modelo principal. Cuando haya dudas, copiar de ah√≠ y adaptar las APIs espec√≠ficas de cada librer√≠a.
